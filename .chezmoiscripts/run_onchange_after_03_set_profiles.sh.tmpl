#!/bin/bash

set -eufo pipefail

# profile.nix: {{ output "sha256sum" (joinPath .chezmoi.homeDir "nix-config/modules/profile.nix") | trim }}
# flake.lock: {{ output "sha256sum" (joinPath .chezmoi.homeDir "nix-config/flake.lock") | trim }}

echo ":: [03] Switching Nix profile"
nix run --extra-experimental-features 'nix-command flakes' ~/nix-config#{{ .hostname }}.switch
